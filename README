----------  Qair V2.0-2 (14-03-2012)
1)
Gestion des drivers pour la connexion à la base modifiée :
* par défaut jdbc est toujours utilisé sous les systèmes de type 'unix'
* par défaut odbc est toujours utilisé sous windows
* il désormais possible de spécifier explicitement le pilote à utiliser
  (après ya pas de raison d'utiliser plus l'un ou l'autre en fonction du système)

La spécification se fait au moment de la création de la connexion (xrConnect)
avec l'argument drv.type. L'info est alors stockée dans 'options()$Xair.drv'
Pour changer le comportement par défaut de manière pérenne, il est donc possible
de préciser dans le fichier .Rprofile options(Xair.drv="le pilote que je préfère").

Il n'est plus nécessaire de charger la librairie adéquate (RJDBC ou RODBC selon) :
celle-ci est automatiquement chargée au moment de l'appel à 'xrConnect' si elle
ne l'est pas encore.

2)
Correction des fonctions de plans de sondage qui ne prenaient pas en compte 
la suppression de la dépendance vis-à-vis de lubridate

----------  Qair V2.0-1 (10-02-2012)
Correction d'un bug dans format.seuil (du à la suppression de la dépendance vis-à-vis de timetools)


----------  Qair V2

la V2 de Qair est enfin disponible. Version 2 car il y a de nombreux changements qui font que la V2 et la V1 ne sont pas compatibles. En gros, il va falloir ré-écrire tous les programmes dépendant de Qair !!! Bon, nan, en réalité, il suffira d'installer 2 versions du paquet et de migrer doucement (ou pas du tout pour les anciens prog) vers la V2.
Pour ça, voir la deuxième partie du mail.

Pour commencer, les changements majeurs dans Qair :
-----------------------------------------------------------------------
1- les classes Qair sont abandonnées au profit de la classe TimeIntervalDataFrame (paquet timetools) ;
2- le rapatriement des données de XR ne récupère plus les attributs habituels (lambertx,longitude, etc.) ;
3- MAIS les fonctions du type "xrGet..." permettent d'aller récupérer les infos dans la base ;
3bis- il est même possible de créer sa propre requête ('xrGetQuery') ;
4- désormais il est possible de récupérer les données de prélèvements manuels directement dans des TimeIntervalDataFrame (merci timetools :D ) ;
5- la connexion à la base est initialisée avec la fonction 'xrConnect' ;
6- les méthodes d'estimation de moyennes annuelles (avec incertitude) développées dans le cadre du GT échantillonnage sont intégrées dans Qair (fonction 'estimation.sondage') ;
7- les critères réglementaires applicables dans l'air ambiant sont définis dans Qair et accessibles via la fonction 'seuils' ;
8- une série de fonctions ('validation.reglementaire' pour commencer) permet de confronter les seuils et les données extraites d'XR (ou dans un format TimeIntervalDataFrame) ;
8 bis- cette partie étant assez conséquente, allez jeter un coup d'oeil à la doc et viendez poser toutes vos questions ensuite ;
9- les fonction du type 'calcRose' renvoyaient des données au format peu exploitable, elles sont remplacées par des compute.rose* qui retourne quelque chose de beaucoup plus simple ;
10- les "vents calmes" sont désormais pris en compte dans l'affichage des roses de vent (cf la doc puis n'hésitez pas à poser vos questions) ;
11- un truc fun -> il est possible d'ajouter une rose de pollution sur un graphique préexistant à l'aide des arguments 'add' (=TRUE), 'centre' et 'facteur' (et donc accessoirement directement sur une carte...).

Voilà, j'ai sûrement oublié des trucs, mais surtout, regarder la doc (en fichier attaché et à partir de R, ce sont les mêmes) et n'hésitez pas à poser des questions.

Deuxième point, comment faire pour garder l'installation de la V1 pour continuer à utiliser les anciens programmes ?
---------------------------------------------------------------------------------------------------------------------------------------------------------
C'est relativement simple :
- installer normalement la version 2 de Qair (récupérable comme toujours ici https://sourceforge.net/projects/packagerqair/) ;
- récupérer la version 1, (manuellement à partir d'ici : "https://sourceforge.net/projects/packagerqair/files/Qair/built%20under%20R2.14.1/") (le .zip pour windows, le .tar.gz pour linux & co) ;
- créer un répertoire du genre "C:/Program Files/R/library/" (en réalité, peu importe le nom de ce répertoire, il doit juste être différent du chemin dans lequel R installe par défaut les paquets et qui doit ressembler à "C:/Program Files/R/R-2.14.1/library/") ;
- ouvrir un terminal de R ;
- installer manuellement la version 1 avec la commande suivante :
install.package ("C:/......./Qair_1.0-1.zip", repos=NULL, lib="C:/Prgram Files/R/library/")

De cette manière, la V2 sera la version chargée par défaut :
library (Qair) # charge la V2

Pour charger la V1 il suffira de préciser le chemin où elle a été installée :
library (Qair, lib.loc="C:/Program Files/R/library/") # charge la V1

-> en définitive, il suffira donc de modifier la ligne de chargement du paquet Qair dans les anciens programmes pour qu'ils continuent à fonctionner.

Bien entendu, il est possible d'inverser l'installation de manière à avoir la V1 par défaut (mais c'est peut-être pas la meilleure façon pour s'habituer à la V2 :) ).

